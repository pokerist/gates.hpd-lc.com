{% extends "base.html" %}
{% block content %}
<section class="card hero">
  <h2>واجهة الأمن</h2>
  <p>ضع البطاقة داخل الإطار ثم التقط الصورة.</p>
</section>

<section class="grid grid-2">
  <div class="card">
    <div class="camera-container">
      <video id="camera" autoplay playsinline></video>
      <canvas id="captureCanvas" class="hidden" hidden></canvas>
      <div class="camera-frame">
        <div class="frame-box"></div>
      </div>
    </div>
    <div style="margin-top: 14px; display: flex; gap: 10px; flex-wrap: wrap;">
      <button class="btn btn-primary" id="captureBtn">التقاط الصورة</button>
      <button class="btn btn-secondary" id="switchCameraBtn">تبديل الكاميرا</button>
      <label class="btn btn-outline">
        رفع صورة
        <input id="fileInput" type="file" accept="image/*" capture="environment" hidden />
      </label>
    </div>
  </div>

  <div class="card">
    <h3>النتيجة</h3>
    <div id="resultPanel" class="result-panel" style="margin-top: 12px;">
      <div class="result-title">في انتظار صورة...</div>
      <div class="field-list">
        <div class="field-item"><strong>الاسم:</strong> <span id="resultName">—</span></div>
        <div class="field-item"><strong>الرقم القومي:</strong> <span id="resultNid">—</span></div>
        <div class="field-item"><strong>الحالة:</strong> <span id="resultStatus">—</span></div>
        <div class="field-item"><strong>السبب:</strong> <span id="resultReason">—</span></div>
        <div class="field-item"><strong>مرات الدخول:</strong> <span id="resultVisits">—</span></div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script src="/static/js/security.js"></script>
{% endblock %}
